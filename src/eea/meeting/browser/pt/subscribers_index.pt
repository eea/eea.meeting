<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
  metal:use-macro="here/main_template/macros/master"
  i18n:domain="eea">
  <body>

    <metal:styleslot fill-slot="style_slot">
      <link rel="stylesheet" type="text/css" media="screen" href="++resource++eea.meeting/common.css" />
    </metal:styleslot>

    <div metal:fill-slot="content-core" class="meeting-items">
       <p>Users subscribed to this meeting</p>
       <a class="back-button" tal:attributes="href python:context.aq_parent.absolute_url()">Back to meeting page</a>
       <div class="clearfix"></div>
       <table class="listing">
        <thead>
          <tr>
            <th>User Name</th>
            <th>Name</th>
            <th>Surname</th>
            <th>Institution</th>
            <th>From Country</th>
            <th>From City</th>
            <th>Email address</th>
            <th>Phone number</th>
            <th>State</th>
            <th>Reimbursed</th>
            <th>Role</th>
          </tr>
        <thead>
        <tbody tal:define="subscribers python:context.get_subscribers()">
          <tr tal:condition="not:subscribers">
            <td colspan="3">No subscribers.</td>
          </tr>
          <tal:subscribers tal:repeat="subscriber subscribers">
            <tr tal:define="subscriber_details python:subscriber.get_details();
                            reimbursed_dict python:{True:'yes', False:'no'};
                            roles_dict python:context.aq_parent.get_subscriber_roles_dict()">
              <td>
                <a tal:attributes="href subscriber/absolute_url" tal:content="string:${subscriber/title} (${subscriber/getId})" />
              </td>
              <td tal:content="python:subscriber_details.get('first_name', '')">First Name</td>
              <td tal:content="python:subscriber_details.get('last_name', '')">Last Name</td>
              <td tal:content="python:subscriber_details.get('institution', '')">Institution</td>
              <td tal:content="python:subscriber_details.get('from_country', '')">From country</td>
              <td tal:content="python:subscriber_details.get('from_city', '')">From city</td>
              <td tal:content="subscriber/email|string:" />
              <td tal:content="python:subscriber_details.get('telephone', '')">Telephone</td>
              <td>
                <span tal:content="subscriber/state" />
              </td>
              <td tal:content="python:reimbursed_dict.get(subscriber.reimbursed)" />
              <td tal:content="python:roles_dict.get(subscriber.role)" />
            </tr>
          </tal:subscribers>
        </tbody>
        <tfoot>
        </tfoot>
      </table>
    </div>
  </body>
</html>
